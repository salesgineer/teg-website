# Next.js Folder Structure Planning for TEG Project

**Document Version:** 1.0
**Date:** 2025-11-07 (Friday)
**Status:** Research & Planning Phase
**Project:** TEG (Transporta Ekspertu Grupa) - Multi-Language Website Redesign

---

## Executive Summary

This document provides a comprehensive folder structure plan for the TEG project's Next.js 15+ implementation. The structure is optimized for:

- **Multi-language support** (Latvian, English, Russian) via i18n routing
- **Three primary services** (Pre-Purchase Inspection, Car Search & Delivery, Mobile Roadside Service)
- **Sanity CMS integration** for content management
- **Scalable component architecture** for code reuse
- **Clear separation of concerns** between frontend, API, and backend services
- **Performance optimization** targeting Core Web Vitals (LCP <2.5s, FID <100ms, CLS <0.1)

This structure follows Next.js 15 App Router conventions and React 19 best practices while maintaining TEG's specific business logic and multi-language requirements.

---

## Project Context

### Current Situation
- **Legacy Stack:** Frontity framework (discontinued, unmaintained)
- **Migration Type:** Ground-up redesign, not legacy code modification
- **Timeline Phase:** Post-research, entering planning and development
- **Key Challenge:** Maintaining three language versions with different completion levels

### Multi-Language Status
- **Latvian (lv):** Complete, production-ready (Quality: 4.8/5)
- **English (en):** ~40% complete, needs significant work (Quality: 2/5)
- **Russian (ru):** Limited coverage, 2 pages only (Quality: 3/5)

---

## Recommended Directory Structure

```
teg-website/
├── .env.local                      # Local environment variables (git ignored)
├── .env.example                    # Template for environment variables
├── .gitignore                      # Git ignore rules
├── CLAUDE.md                       # Project guidelines and directives
├── README.md                       # Project documentation
├── package.json                    # Dependencies and scripts
├── tsconfig.json                   # TypeScript configuration
├── tailwind.config.ts              # Tailwind CSS configuration
├── next.config.js                  # Next.js configuration
├── middleware.ts                   # i18n and authentication middleware
│
├── public/
│   ├── images/
│   │   ├── services/               # Service-related images
│   │   ├── team/                   # Team member photos
│   │   ├── testimonials/           # Customer testimonial images
│   │   └── icons/                  # SVG icons and logos
│   ├── fonts/                      # Custom font files
│   └── favicon.ico                 # Website favicon
│
├── src/
│   ├── app/
│   │   ├── layout.tsx              # Root layout (shared across all locales)
│   │   ├── not-found.tsx           # 404 error page
│   │   ├── error.tsx               # Error boundary
│   │   │
│   │   ├── [locale]/               # DYNAMIC SEGMENT: Locale routing (lv, en, ru)
│   │   │   ├── layout.tsx          # Locale-specific layout
│   │   │   ├── page.tsx            # Homepage (/lv, /en, /ru)
│   │   │   ├── error.tsx           # Locale-specific error boundary
│   │   │   │
│   │   │   ├── services/           # Services section
│   │   │   │   ├── page.tsx        # Services overview
│   │   │   │   ├── layout.tsx      # Services layout
│   │   │   │   ├── [service]/      # Dynamic service pages
│   │   │   │   │   ├── page.tsx    # Individual service page
│   │   │   │   │   └── layout.tsx  # Service detail layout
│   │   │   │   └── components/     # Service-specific components
│   │   │   │       ├── ServiceCard.tsx
│   │   │   │       ├── ServiceHero.tsx
│   │   │   │       └── PricingTable.tsx
│   │   │   │
│   │   │   ├── about/              # About page
│   │   │   │   ├── page.tsx        # About company page
│   │   │   │   └── components/     # About-specific components
│   │   │   │       ├── TeamSection.tsx
│   │   │   │       ├── MissionStatement.tsx
│   │   │   │       └── Timeline.tsx
│   │   │   │
│   │   │   ├── contact/            # Contact page
│   │   │   │   ├── page.tsx        # Contact form & info
│   │   │   │   └── components/     # Contact-specific components
│   │   │   │       ├── ContactForm.tsx
│   │   │   │       └── ContactInfo.tsx
│   │   │   │
│   │   │   ├── appointments/       # Appointment/booking system
│   │   │   │   ├── page.tsx        # Appointment booking page
│   │   │   │   ├── layout.tsx      # Appointments layout
│   │   │   │   ├── [appointmentId]/ # Individual appointment detail
│   │   │   │   │   └── page.tsx
│   │   │   │   └── components/     # Appointment-specific components
│   │   │   │       ├── BookingForm.tsx
│   │   │   │       ├── DatePicker.tsx
│   │   │   │       ├── ServiceSelector.tsx
│   │   │   │       └── ConfirmationModal.tsx
│   │   │   │
│   │   │   ├── blog/               # Blog/content section
│   │   │   │   ├── page.tsx        # Blog listing page
│   │   │   │   ├── [slug]/         # Individual blog post
│   │   │   │   │   └── page.tsx
│   │   │   │   └── components/     # Blog-specific components
│   │   │   │       ├── PostCard.tsx
│   │   │   │       └── PostHeader.tsx
│   │   │   │
│   │   │   └── legal/              # Legal pages
│   │   │       ├── privacy/        # Privacy policy
│   │   │       │   └── page.tsx
│   │   │       └── terms/          # Terms of service
│   │   │           └── page.tsx
│   │   │
│   │   └── api/                    # Backend API routes
│   │       ├── appointments/       # Appointment endpoints
│   │       │   ├── route.ts        # POST: Create appointment, GET: List appointments
│   │       │   ├── [id]/           # Individual appointment
│   │       │   │   ├── route.ts    # GET: Detail, PATCH: Update, DELETE: Cancel
│   │       │   │   └── confirm/    # Confirmation endpoint
│   │       │   │       └── route.ts
│   │       │   └── availability/   # Check available slots
│   │       │       └── route.ts
│   │       │
│   │       ├── contact/            # Contact form submission
│   │       │   └── route.ts        # POST: Submit contact form
│   │       │
│   │       ├── inspections/        # Inspection data endpoints
│   │       │   └── route.ts        # GET: Fetch inspection details
│   │       │
│   │       ├── auth/               # Authentication endpoints
│   │       │   ├── login/
│   │       │   │   └── route.ts
│   │       │   ├── logout/
│   │       │   │   └── route.ts
│   │       │   └── refresh/
│   │       │       └── route.ts
│   │       │
│   │       └── health/             # Health check endpoint
│   │           └── route.ts
│   │
│   ├── components/                 # Reusable components
│   │   ├── ui/                     # Base UI components (unstyled, reusable)
│   │   │   ├── Button.tsx
│   │   │   ├── Card.tsx
│   │   │   ├── Modal.tsx
│   │   │   ├── Input.tsx
│   │   │   ├── Select.tsx
│   │   │   ├── Textarea.tsx
│   │   │   ├── Badge.tsx
│   │   │   ├── Alert.tsx
│   │   │   ├── Tabs.tsx
│   │   │   ├── Dropdown.tsx
│   │   │   ├── Pagination.tsx
│   │   │   └── Skeleton.tsx
│   │   │
│   │   ├── forms/                  # Form-specific components
│   │   │   ├── FormField.tsx       # Wrapper for form field with validation
│   │   │   ├── FormError.tsx       # Error message display
│   │   │   ├── FormLabel.tsx       # Label wrapper
│   │   │   ├── ContactFormContainer.tsx
│   │   │   ├── AppointmentFormContainer.tsx
│   │   │   └── SubscribeForm.tsx
│   │   │
│   │   ├── layout/                 # Layout components
│   │   │   ├── Header.tsx          # Global header/navigation
│   │   │   ├── Footer.tsx          # Global footer
│   │   │   ├── Navigation.tsx      # Main navigation menu
│   │   │   ├── LanguageSwitcher.tsx # i18n language selector
│   │   │   ├── Sidebar.tsx         # Sidebar layout component
│   │   │   └── Container.tsx       # Content container wrapper
│   │   │
│   │   ├── features/               # Feature-specific components
│   │   │   ├── Hero/
│   │   │   │   ├── HeroSection.tsx
│   │   │   │   └── HeroImage.tsx
│   │   │   │
│   │   │   ├── Services/
│   │   │   │   ├── ServiceGrid.tsx
│   │   │   │   ├── ServiceFeatures.tsx
│   │   │   │   └── PricingSection.tsx
│   │   │   │
│   │   │   ├── CTA/
│   │   │   │   └── CallToAction.tsx
│   │   │   │
│   │   │   ├── Testimonials/
│   │   │   │   ├── TestimonialCarousel.tsx
│   │   │   │   └── TestimonialCard.tsx
│   │   │   │
│   │   │   ├── FAQ/
│   │   │   │   ├── FAQSection.tsx
│   │   │   │   └── FAQItem.tsx
│   │   │   │
│   │   │   └── Stats/
│   │   │       └── StatisticsSection.tsx
│   │   │
│   │   └── common/                 # Common utility components
│   │       ├── LoadingSpinner.tsx
│   │       ├── ErrorBoundary.tsx
│   │       ├── Breadcrumb.tsx
│   │       └── SEOHead.tsx
│   │
│   ├── lib/                        # Utility functions and configurations
│   │   ├── sanity/                 # Sanity CMS integration
│   │   │   ├── client.ts           # Sanity client initialization
│   │   │   ├── queries/            # GROQ query definitions
│   │   │   │   ├── pages.ts
│   │   │   │   ├── services.ts
│   │   │   │   ├── posts.ts
│   │   │   │   ├── appointments.ts
│   │   │   │   └── settings.ts
│   │   │   ├── mutations/          # Sanity mutation definitions
│   │   │   │   ├── appointments.ts
│   │   │   │   └── contacts.ts
│   │   │   └── types.ts            # TypeScript types from Sanity schema
│   │   │
│   │   ├── supabase/               # Supabase integration (database & auth)
│   │   │   ├── client.ts           # Supabase client for browser
│   │   │   ├── server.ts           # Supabase client for server
│   │   │   └── types.ts            # Database types
│   │   │
│   │   ├── validations/            # Zod validation schemas
│   │   │   ├── contact.ts          # Contact form schema
│   │   │   ├── appointment.ts      # Appointment form schema
│   │   │   ├── auth.ts             # Auth form schemas
│   │   │   └── inspection.ts       # Inspection data schema
│   │   │
│   │   ├── api-client/             # API client utilities
│   │   │   ├── appointments.ts     # Appointment API calls
│   │   │   ├── contact.ts          # Contact form API calls
│   │   │   ├── inspections.ts      # Inspection data API calls
│   │   │   └── index.ts            # API client factory
│   │   │
│   │   ├── i18n/                   # Internationalization utilities
│   │   │   ├── config.ts           # i18n configuration
│   │   │   ├── locales.ts          # Locale definitions
│   │   │   ├── translations.ts     # Translation type definitions
│   │   │   └── useTranslations.ts  # React hook for translations
│   │   │
│   │   ├── hooks/                  # Custom React hooks
│   │   │   ├── useLocale.ts        # Get current locale
│   │   │   ├── useTranslation.ts   # Translation hook
│   │   │   ├── useForm.ts          # Form handling hook
│   │   │   ├── useAsync.ts         # Async operation hook
│   │   │   ├── useDebounce.ts      # Debounce hook
│   │   │   ├── useFetch.ts         # Data fetching hook
│   │   │   └── useLocalStorage.ts  # Local storage hook
│   │   │
│   │   ├── utils/                  # Utility functions
│   │   │   ├── cn.ts               # Class name utility (clsx)
│   │   │   ├── format.ts           # Date, time, number formatting
│   │   │   ├── validation.ts       # Validation helper functions
│   │   │   ├── auth.ts             # Authentication utilities
│   │   │   ├── seo.ts              # SEO utilities
│   │   │   ├── constants.ts        # App constants
│   │   │   └── helpers.ts          # General helper functions
│   │   │
│   │   └── types/                  # Global TypeScript types
│   │       ├── index.ts            # Type exports
│   │       ├── api.ts              # API response types
│   │       ├── database.ts         # Database entity types
│   │       └── common.ts           # Common shared types
│   │
│   ├── styles/                     # Global styles
│   │   ├── globals.css             # Global styles and Tailwind directives
│   │   ├── variables.css           # CSS custom properties/variables
│   │   └── animations.css          # Reusable animation definitions
│   │
│   └── content/                    # Static content data (optional, if not using Sanity)
│       ├── services.json           # Service definitions fallback
│       └── navigation.json         # Navigation structure
│
├── tests/                          # Test files
│   ├── unit/                       # Unit tests
│   │   ├── components/             # Component tests
│   │   ├── lib/                    # Library/utility tests
│   │   └── hooks/                  # Hook tests
│   ├── integration/                # Integration tests
│   │   ├── api/                    # API endpoint tests
│   │   └── flows/                  # User flow tests
│   └── e2e/                        # End-to-end tests (Playwright/Cypress)
│       ├── navigation.spec.ts
│       ├── booking.spec.ts
│       └── forms.spec.ts
│
├── docs/                           # Project documentation
│   ├── architecture.md             # Architecture decisions
│   ├── api-routes.md               # API endpoint documentation
│   ├── deployment.md               # Deployment guide
│   ├── database-schema.md          # Database structure
│   ├── i18n-guide.md               # Internationalization guide
│   └── sanity-integration.md       # Sanity CMS guide
│
└── .github/
    ├── workflows/                  # GitHub Actions workflows
    │   ├── ci.yml                  # CI/CD pipeline
    │   ├── deploy.yml              # Deploy to production
    │   └── test.yml                # Run tests
    └── ISSUE_TEMPLATE/             # Issue templates
        ├── bug.md
        └── feature.md
```

---

## Key Organizational Patterns

### 1. Dynamic Locale Routing with i18n

The `[locale]` dynamic segment enables multi-language support:

```typescript
// src/middleware.ts - Handles locale routing
import { match } from '@formatjs/intl-localematcher';
import Negotiator from 'negotiator';

const locales = ['lv', 'en', 'ru'];
const defaultLocale = 'lv';

export function middleware(request: NextRequest) {
  const pathname = request.nextUrl.pathname;

  // Check if locale is already in pathname
  const pathnameHasLocale = locales.some(
    locale => pathname.startsWith(`/${locale}/`) || pathname === `/${locale}`
  );

  if (pathnameHasLocale) {
    return NextResponse.next();
  }

  // Negotiate locale from Accept-Language header
  const languages = new Negotiator({
    headers: { 'accept-language': request.headers.get('accept-language') || '' },
  }).languages();

  const locale = match(languages, locales, defaultLocale);

  return NextResponse.redirect(
    new URL(`/${locale}${pathname}`, request.url)
  );
}

export const config = {
  matcher: ['/((?!api|_next|public|scripts).*)'],
};
```

### 2. Service-Oriented Page Structure

Each service gets its own route with dynamic parameters:

```typescript
// src/app/[locale]/services/[service]/page.tsx
import { Metadata } from 'next';
import { notFound } from 'next/navigation';
import { getServiceDetails } from '@/lib/sanity/queries/services';

interface ServicePageProps {
  params: {
    locale: string;
    service: string;
  };
}

export async function generateMetadata({
  params,
}: ServicePageProps): Promise<Metadata> {
  const service = await getServiceDetails(params.service, params.locale);

  if (!service) {
    return {};
  }

  return {
    title: service.title,
    description: service.description,
    openGraph: {
      title: service.title,
      description: service.description,
      images: [{ url: service.image?.url || '' }],
    },
  };
}

export async function generateStaticParams() {
  const services = ['pre-purchase-inspection', 'car-search-delivery', 'roadside-service'];
  const locales = ['lv', 'en', 'ru'];

  return services.flatMap((service) =>
    locales.map((locale) => ({
      locale,
      service,
    }))
  );
}

export default async function ServicePage({ params }: ServicePageProps) {
  const service = await getServiceDetails(params.service, params.locale);

  if (!service) {
    notFound();
  }

  return (
    <main>
      <Hero title={service.title} description={service.description} />
      <Features features={service.features} />
      <PricingSection pricing={service.pricing} />
      <CallToAction />
    </main>
  );
}
```

### 3. Sanity CMS Integration

Queries are organized by entity type:

```typescript
// src/lib/sanity/queries/services.ts
import { groq } from 'next-sanity';
import { sanityClient } from './client';

export async function getServiceDetails(service: string, locale: string) {
  const query = groq`
    *[_type == "service" && slug.current == $service && locale == $locale][0] {
      _id,
      title,
      description,
      slug,
      image,
      features[],
      pricing {
        basePrice,
        currency,
        description
      },
      seo {
        title,
        description,
        keywords[]
      }
    }
  `;

  return sanityClient.fetch(query, { service, locale });
}

export async function getAllServices(locale: string) {
  const query = groq`
    *[_type == "service" && locale == $locale] | order(orderRank) {
      _id,
      title,
      description,
      slug,
      image,
      pricing { basePrice }
    }
  `;

  return sanityClient.fetch(query, { locale });
}
```

### 4. API Route Organization

API routes grouped by resource type:

```typescript
// src/app/api/appointments/route.ts
import { NextRequest, NextResponse } from 'next/server';
import { createAppointment, getAppointments } from '@/lib/supabase/queries';
import { rateLimit } from '@/lib/utils/rate-limit';
import { appointmentSchema } from '@/lib/validations/appointment';

export async function GET(request: NextRequest) {
  const userId = request.headers.get('x-user-id');

  if (!userId) {
    return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });
  }

  const appointments = await getAppointments(userId);
  return NextResponse.json(appointments);
}

export async function POST(request: NextRequest) {
  try {
    const ip = request.headers.get('x-forwarded-for') || 'anonymous';
    const { success } = await rateLimit(ip, 5); // 5 requests per minute

    if (!success) {
      return NextResponse.json(
        { error: 'Too many requests' },
        { status: 429 }
      );
    }

    const body = await request.json();
    const validated = appointmentSchema.parse(body);

    const appointment = await createAppointment(validated);

    return NextResponse.json(appointment, { status: 201 });
  } catch (error) {
    return NextResponse.json(
      { error: 'Invalid request' },
      { status: 400 }
    );
  }
}
```

### 5. Form Validation with Zod

Centralized validation schemas:

```typescript
// src/lib/validations/appointment.ts
import { z } from 'zod';

export const appointmentSchema = z.object({
  serviceType: z.enum(['pre-purchase-inspection', 'car-search-delivery', 'roadside-service']),
  vehicleYear: z.number().min(1900).max(new Date().getFullYear()),
  vehicleMake: z.string().min(1).max(100),
  vehicleModel: z.string().min(1).max(100),
  customerEmail: z.string().email(),
  customerPhone: z.string().regex(/^\+?[1-9]\d{1,14}$/),
  appointmentDate: z.date().min(new Date()),
  notes: z.string().max(500).optional(),
});

export type Appointment = z.infer<typeof appointmentSchema>;
```

### 6. Component Composition Pattern

Reusable, well-documented components:

```typescript
// src/components/features/Services/ServiceCard.tsx
import { FC } from 'react';
import Link from 'next/link';
import { useLocale } from '@/lib/hooks/useLocale';

interface ServiceCardProps {
  title: string;
  description: string;
  image: string;
  slug: string;
  price: number;
}

export const ServiceCard: FC<ServiceCardProps> = ({
  title,
  description,
  image,
  slug,
  price,
}) => {
  const locale = useLocale();

  return (
    <article className="card hover:shadow-lg transition-shadow">
      <img
        src={image}
        alt={title}
        className="w-full h-48 object-cover rounded-t-lg"
      />
      <div className="p-6">
        <h3 className="text-xl font-bold mb-2">{title}</h3>
        <p className="text-gray-600 mb-4">{description}</p>
        <div className="flex justify-between items-center">
          <span className="text-2xl font-bold">€{price}</span>
          <Link
            href={`/${locale}/services/${slug}`}
            className="btn btn-primary"
          >
            Learn More
          </Link>
        </div>
      </div>
    </article>
  );
};
```

---

## Best Practices for Multi-Language Setup

### 1. Locale-First URL Structure

```
/lv/           # Latvian homepage
/lv/services/  # Latvian services
/en/           # English homepage
/en/services/  # English services
/ru/           # Russian homepage
/ru/services/  # Russian services
```

### 2. Content Organization in Sanity

Store all language variants with explicit locale field:

```groq
{
  _type: "service",
  locale: "lv",
  title: "Automašīnas pirkšanas iepriekšēja pārbaude",
  slug: "pre-purchase-inspection",
  // ... other fields
}
```

### 3. Language Switcher Component

```typescript
// src/components/layout/LanguageSwitcher.tsx
import Link from 'next/link';
import { usePathname } from 'next/navigation';
import { useLocale } from '@/lib/hooks/useLocale';

const locales = [
  { code: 'lv', name: 'Latviešu' },
  { code: 'en', name: 'English' },
  { code: 'ru', name: 'Русский' },
];

export function LanguageSwitcher() {
  const locale = useLocale();
  const pathname = usePathname();

  const switchLocale = (newLocale: string) => {
    const segments = pathname.split('/');
    segments[1] = newLocale;
    return segments.join('/');
  };

  return (
    <div className="flex gap-2">
      {locales.map(({ code, name }) => (
        <Link
          key={code}
          href={switchLocale(code)}
          className={`px-3 py-1 rounded ${
            locale === code ? 'bg-primary text-white' : 'hover:bg-gray-100'
          }`}
        >
          {name}
        </Link>
      ))}
    </div>
  );
}
```

### 4. Hook for Locale Context

```typescript
// src/lib/hooks/useLocale.ts
import { useParams } from 'next/navigation';

export function useLocale() {
  const params = useParams();
  return (params.locale as string) || 'lv';
}
```

---

## Sanity CMS Integration Approach

### 1. Schema Structure

Organize Sanity documents by type with locale support:

```
Documents:
├── services (with locale: enum[lv, en, ru])
├── pages (with locale: enum[lv, en, ru])
├── blog-posts (with locale: enum[lv, en, ru])
├── appointments (referenced by service + user)
├── contact-submissions (form data)
├── team-members
├── testimonials (with locale support)
└── settings (global config)
```

### 2. Client Configuration

```typescript
// src/lib/sanity/client.ts
import { createClient } from 'next-sanity';

export const sanityClient = createClient({
  projectId: process.env.NEXT_PUBLIC_SANITY_PROJECT_ID,
  dataset: process.env.NEXT_PUBLIC_SANITY_DATASET,
  apiVersion: '2024-01-01',
  useCdn: true,
});

export const writeClient = createClient({
  projectId: process.env.NEXT_PUBLIC_SANITY_PROJECT_ID,
  dataset: process.env.NEXT_PUBLIC_SANITY_DATASET,
  apiVersion: '2024-01-01',
  token: process.env.SANITY_API_TOKEN,
  useCdn: false,
});
```

### 3. Reusable Query Patterns

```typescript
// Get content with fallback to default language
export async function getLocalizedContent(
  type: string,
  slug: string,
  locale: string,
  fallbackLocale = 'lv'
) {
  const query = groq`
    *[_type == $type && slug.current == $slug && locale == $locale][0] ||
    *[_type == $type && slug.current == $slug && locale == $fallbackLocale][0]
  `;

  return sanityClient.fetch(query, { type, slug, locale, fallbackLocale });
}
```

---

## API Route Patterns

### 1. RESTful Appointment Management

```typescript
// GET /api/appointments - List user's appointments
// POST /api/appointments - Create new appointment
// GET /api/appointments/[id] - Get appointment details
// PATCH /api/appointments/[id] - Update appointment
// DELETE /api/appointments/[id] - Cancel appointment
// POST /api/appointments/[id]/confirm - Confirm appointment
```

### 2. Error Handling & Status Codes

```typescript
const httpStatus = {
  OK: 200,
  CREATED: 201,
  BAD_REQUEST: 400,
  UNAUTHORIZED: 401,
  FORBIDDEN: 403,
  NOT_FOUND: 404,
  CONFLICT: 409,
  UNPROCESSABLE_ENTITY: 422,
  TOO_MANY_REQUESTS: 429,
  INTERNAL_SERVER_ERROR: 500,
  SERVICE_UNAVAILABLE: 503,
};
```

### 3. Common Response Format

```typescript
// Success response
{
  success: true,
  data: { /* entity data */ },
  timestamp: "2024-11-07T21:47:00Z"
}

// Error response
{
  success: false,
  error: "Human-readable error message",
  code: "ERROR_CODE",
  timestamp: "2024-11-07T21:47:00Z"
}
```

---

## Implementation Phases & Checklist

### Phase 1: Foundation Setup (Weeks 1-2)

- [ ] Initialize Next.js 15 project with TypeScript
- [ ] Set up Tailwind CSS and styling infrastructure
- [ ] Configure TypeScript strict mode and ESLint
- [ ] Set up Sanity CMS project and initial schema
- [ ] Implement i18n middleware and locale routing
- [ ] Create root layout and error boundaries
- [ ] Set up GitHub Actions CI/CD pipeline

**Deliverable:** Functional dev environment with three locale routes and basic layout

### Phase 2: Core Pages (Weeks 3-4)

- [ ] Implement homepage for all three locales
- [ ] Create services overview and detail pages
- [ ] Build about page with team section
- [ ] Create contact page (fix English placeholder text)
- [ ] Implement basic navigation and header/footer
- [ ] Set up SEO metadata for all pages
- [ ] Create Sanity content for all pages

**Deliverable:** All main pages functional with Sanity CMS integration

### Phase 3: Booking System (Weeks 5-6)

- [ ] Design appointment/booking form schema
- [ ] Implement appointment form with validation
- [ ] Create appointment API endpoints
- [ ] Set up Supabase database for appointments
- [ ] Implement appointment confirmation & notifications
- [ ] Create user appointment management dashboard
- [ ] Add email notifications via SendGrid

**Deliverable:** Fully functional booking system with email confirmations

### Phase 4: Content & Language (Weeks 7-8)

- [ ] Complete English language translation (currently 40%)
- [ ] Add Russian language support (currently limited)
- [ ] Create blog/resources section structure
- [ ] Implement content caching strategy
- [ ] Add testimonials/case studies
- [ ] Create FAQ section
- [ ] Set up Sanity localization workflow

**Deliverable:** All three languages complete and content-rich

### Phase 5: Performance & SEO (Weeks 9-10)

- [ ] Optimize images with Next.js Image component
- [ ] Implement Core Web Vitals monitoring (Sentry)
- [ ] Add structured data (Schema.org JSON-LD)
- [ ] Create sitemap.xml and robots.txt
- [ ] Implement meta tags for social sharing
- [ ] Set up Google Analytics 4
- [ ] Performance audit and optimization

**Deliverable:** All Core Web Vitals targets met, SEO optimized

### Phase 6: Testing & QA (Weeks 11-12)

- [ ] Set up unit tests for components and utilities
- [ ] Create integration tests for API routes
- [ ] Set up E2E tests with Playwright
- [ ] Cross-browser testing (Chrome, Firefox, Safari, Edge)
- [ ] Performance testing and optimization
- [ ] Security audit (OWASP)
- [ ] Content review and QA in all languages

**Deliverable:** Full test coverage, zero critical security issues

### Phase 7: Deployment & Launch (Week 13)

- [ ] Configure Vercel deployment
- [ ] Set up environment variables for production
- [ ] DNS configuration and domain pointing
- [ ] Sanity production dataset sync
- [ ] CDN and caching strategy
- [ ] Monitor production metrics
- [ ] Create runbook and deployment docs
- [ ] Post-launch monitoring and quick-fix plan

**Deliverable:** Live production website with monitoring

---

## Key Configuration Files

### tsconfig.json

```json
{
  "compilerOptions": {
    "target": "ES2020",
    "useDefineForClassFields": true,
    "lib": ["ES2020", "DOM", "DOM.Iterable"],
    "module": "ESNext",
    "skipLibCheck": true,
    "strict": true,
    "esModuleInterop": true,
    "resolveJsonModule": true,
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"]
    }
  },
  "include": ["next-env.d.ts", "**/*.ts", "**/*.tsx"],
  "exclude": ["node_modules"]
}
```

### next.config.js

```javascript
/** @type {import('next').NextConfig} */
const nextConfig = {
  reactStrictMode: true,
  swcMinify: true,
  images: {
    remotePatterns: [
      {
        protocol: 'https',
        hostname: 'cdn.sanity.io',
      },
    ],
    deviceSizes: [640, 750, 828, 1080, 1200, 1920, 2048, 3840],
    imageSizes: [16, 32, 48, 64, 96, 128, 256, 384],
  },
  headers: async () => {
    return [
      {
        source: '/:path*',
        headers: [
          {
            key: 'X-DNS-Prefetch-Control',
            value: 'on',
          },
        ],
      },
    ];
  },
};

module.exports = nextConfig;
```

### Environment Variables (.env.example)

```bash
# Sanity CMS
NEXT_PUBLIC_SANITY_PROJECT_ID=your_project_id
NEXT_PUBLIC_SANITY_DATASET=production
SANITY_API_TOKEN=your_api_token

# Supabase
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key

# SendGrid
SENDGRID_API_KEY=your_sendgrid_key

# Sentry (Error Tracking)
NEXT_PUBLIC_SENTRY_DSN=your_sentry_dsn

# Environment
NODE_ENV=development
NEXT_PUBLIC_APP_URL=http://localhost:3000
```

---

## Performance Targets

### Core Web Vitals
- **LCP (Largest Contentful Paint):** < 2.5s
- **FID (First Input Delay):** < 100ms
- **CLS (Cumulative Layout Shift):** < 0.1

### Additional Metrics
- **FCP (First Contentful Paint):** < 1.8s
- **TTFB (Time to First Byte):** < 600ms
- **PageSpeed Score:** > 90 (Desktop), > 80 (Mobile)

### Optimization Strategies
1. Image optimization with Next.js Image component
2. Code splitting and lazy loading
3. Static generation (SSG) where possible
4. ISR (Incremental Static Regeneration) for CMS content
5. Caching strategy (client, CDN, server)
6. Font optimization and preloading
7. Bundle size monitoring with bundleanalyzer

---

## Development Workflow

### Local Development

```bash
# Install dependencies
npm install

# Start dev server
npm run dev

# Run tests
npm run test

# Build for production
npm run build

# Start production server
npm run start
```

### Git Workflow

```bash
# Feature branch
git checkout -b feature/service-booking

# Commit convention
git commit -m "feat: add appointment booking form"
# Types: feat, fix, docs, style, refactor, test, chore

# Push and create PR
git push origin feature/service-booking
```

### Code Review Checklist

- [ ] Code follows project style guide
- [ ] TypeScript types are accurate
- [ ] No console.log statements in production code
- [ ] Tests are included and passing
- [ ] Documentation is updated
- [ ] Performance implications reviewed
- [ ] Accessibility (WCAG) compliance verified
- [ ] Mobile responsiveness tested

---

## References & Research Materials

### Research Findings
- **Page Structure Analysis:** `/obsidian_notes/Projects/TEG/research/analysis/current-page-structure.md`
- **Technical Stack Analysis:** `/obsidian_notes/Projects/TEG/research/technical-analysis/comprehensive-tech-stack-analysis.md`
- **Page Copy (Multi-Language):** `/obsidian_notes/Projects/TEG/research/page-copy/`
  - Latvian: Complete and production-ready
  - English: Incomplete (40%), needs work
  - Russian: Limited coverage

### External Documentation

- **Next.js:** https://nextjs.org/docs
- **React 19:** https://react.dev
- **TypeScript:** https://www.typescriptlang.org/docs
- **Tailwind CSS:** https://tailwindcss.com/docs
- **Sanity CMS:** https://www.sanity.io/docs
- **Supabase:** https://supabase.com/docs
- **next-intl:** https://next-intl-docs.vercel.app

### Related Documents

- **Architecture Decision Record:** `/docs/Week_45/25.11.07_Friday/` (this series)
- **Implementation Checklist:** See Phase breakdown above
- **API Endpoints Documentation:** To be created during Phase 3
- **Database Schema:** To be created during Phase 3

---

## Notes & Considerations

### Multi-Language Challenges

1. **Incomplete English:** Currently at 40% completion with placeholder text issues on contact page. Prioritize English completion in Phase 4.

2. **Limited Russian:** Only 2 pages translated. Plan Russian content strategy as lower-priority feature.

3. **Content Management:** Use Sanity's locale-aware queries to handle missing translations gracefully with fallbacks to Latvian.

### Technical Debt Prevention

1. **Code Organization:** Keep components small and focused. Max 400 lines per component file.

2. **Type Safety:** Use strict TypeScript. No `any` types without explicit justification.

3. **Testing:** Aim for 80%+ code coverage. Test critical paths first.

4. **Documentation:** Document complex logic. Keep READMEs updated.

### Security Considerations

1. **Form Submissions:** Implement CSRF protection with SameSite cookies
2. **API Rate Limiting:** Implement per-IP and per-user rate limits
3. **Sensitive Data:** Never commit `.env.local` or API keys
4. **HTTPS Only:** Enforce HTTPS in production
5. **Input Validation:** Validate all user input with Zod schemas

---

## Document Metadata

**Created:** 2025-11-07 21:47 (Riga Time)
**Version:** 1.0
**Status:** Complete - Ready for Review
**Next Review:** After Phase 1 completion

### Changelog

- **v1.0 (2025-11-07):** Initial comprehensive structure documentation
  - Complete folder hierarchy for Next.js 15 + React 19
  - Integration patterns for Sanity CMS and Supabase
  - Multi-language routing and i18n setup
  - API route patterns and validation
  - 7-phase implementation roadmap
  - Performance targets and optimization strategies
  - Security and best practices guidelines
